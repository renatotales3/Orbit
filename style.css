/* --- Reset Básico e Configurações Globais --- */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }

html {
    font-size: 53.4375%; /* Alvo: 8.55px. */
    scroll-behavior: smooth;
}

/* --- Variáveis de Tema --- */
:root[data-theme="light"] {
    --bg-color: #F0F2F5; --text-color: #333; --primary-color: #007AFF;
    --component-bg: #FFFFFF; --icon-color: #888; --gray-color: #B0B0B0;
    --shadow: 0px 4px 12px rgba(0, 0, 0, 0.08);
    --soft-shadow-inset-sharp: inset 2px 2px 5px #d1d9e6, inset -3px -3px 5px #ffffff;
    --border-color: transparent;
    --divider-color: #e9ecef;
    --danger-bg: #dc3545;
    --danger-text: white;
    --danger-border: #dc3545;
}
:root[data-theme="dark"] {
    --bg-color: #191919; --text-color: #F7F6F3; --primary-color: #6C7EFF;
    --component-bg: #2F2F2F; --icon-color: #9B9B9B; --gray-color: #6C757D;
    --shadow: 0px 4px 20px rgba(0, 0, 0, 0.4), 0px 1px 3px rgba(0, 0, 0, 0.2);
    --soft-shadow-inset-sharp: inset 2px 2px 4px rgba(0, 0, 0, 0.3), inset -2px -2px 4px rgba(255, 255, 255, 0.02);
    --border-color: #3E3E3E;
    --divider-color: #373737;
    --danger-bg: #E63946;
    --danger-text: white;
    --danger-border: #E63946;
}
/* Dark Mode Premium Enhancements */
:root[data-theme="dark"] .modal-content {
    box-shadow: 0px 12px 40px rgba(0, 0, 0, 0.6), 0px 4px 16px rgba(0, 0, 0, 0.3);
}
:root[data-theme="dark"] .soft-button {
    border-color: #404040;
}
:root[data-theme="dark"] .soft-button:hover {
    background-color: #404040;
    border-color: #4D4D4D;
}
:root[data-theme="dark"] .category-btn.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
    box-shadow: 0px 4px 12px rgba(108, 126, 255, 0.3);
}
:root[data-theme="light"] .category-btn.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
    box-shadow: 0px 4px 12px rgba(0, 122, 255, 0.25);
}
:root[data-theme="dark"] .progress-bar {
    background: linear-gradient(90deg, var(--primary-color), #8B95FF);
}

/* Mais elementos com cor primária estratégica */
.soft-button.add-btn {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}
.soft-button.add-btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
}
.priority-tag-1 {
    background-color: var(--primary-color) !important;
}
.day-circle.current {
    border-color: var(--primary-color);
    box-shadow: 0px 0px 0px 3px rgba(var(--primary-color), 0.2);
}
.picker-button.active {
    border-color: var(--primary-color);
    box-shadow: 0px 0px 8px rgba(var(--primary-color), 0.3);
}

/* Ajuste rosa como opção do tema escuro na paleta JS (feito em script) */
#stretch-display { display: none; }
#stretch-display.active { display: flex; }

body { background-color: var(--bg-color); color: var(--text-color); font-size: 1.6rem; }

/* --- Lógica Anti-Flicker & Smooth Transitions --- */
.page { 
    transition: opacity 0.2s ease-in-out; 
}
.page:not(.active) { 
    opacity: 0; 
    pointer-events: none; 
}
.page.active { 
    opacity: 1; 
    pointer-events: auto; 
}

/* Hover States for Desktop */
@media (hover: hover) {
    .soft-button:hover { 
        transform: translateY(-1px); 
        box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.12); 
    }
    .soft-button.icon-btn:hover { 
        transform: translateY(-1px) scale(1.05); 
    }
    .nav-button:hover { 
        color: var(--primary-color); 
        opacity: 0.8; 
    }
}

/* --- Original Anti-Flicker --- */
.content { 
    flex-grow: 1; 
    overflow-y: auto; 
    padding: 2rem 1.5rem; 
    padding-bottom: 10rem;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    max-width: 90rem;
    margin: 0 auto;
}
.content.js-loaded {
    opacity: 1;
}

.page { display: none; }
.page.active { display: block; }

/* --- Títulos das Páginas --- */
.page h1 { 
    display: none; /* Removido - redundante com navbar */
}

/* --- Componentes Genéricos --- */
.soft-button { background-color: var(--component-bg); border: 1px solid var(--border-color); padding: 1.2rem 2.4rem; border-radius: 1.2rem; color: var(--text-color); font-weight: 500; cursor: pointer; box-shadow: var(--shadow); transition: all 0.2s ease-in-out; display: flex; align-items: center; justify-content: center; gap: 0.8rem; white-space: nowrap; }
.soft-button:active { transform: scale(0.98); box-shadow: var(--soft-shadow-inset-sharp); }
.soft-button.loading { position: relative; pointer-events: none; opacity: 0.7; }
.soft-button.loading::after { 
    content: ''; 
    position: absolute; 
    width: 1.6rem; 
    height: 1.6rem; 
    border: 2px solid transparent; 
    border-top: 2px solid currentColor; 
    border-radius: 50%; 
    animation: spin 1s linear infinite; 
}
@keyframes spin { 
    to { transform: rotate(360deg); } 
}
.soft-button.danger { background-color: var(--danger-bg); color: var(--danger-text); border-color: var(--danger-border); }
.soft-input, .soft-textarea { width: 100%; border: 1px solid var(--border-color); padding: 1.6rem; border-radius: 1.2rem; background-color: var(--bg-color); color: var(--text-color); font-size: 1.6rem; box-shadow: var(--soft-shadow-inset-sharp); }
/* Melhor espaçamento para inputs com setinhas (date/time) */
input[type="date"], input[type="time"], input[type="datetime-local"] { 
    padding-right: 3.2rem !important; 
}
.soft-input:focus, .soft-textarea:focus { outline: none; }
.soft-button.icon-btn { padding: 0; width: 3.5rem; height: 3.5rem; font-size: 2rem; border-radius: 50%; color: var(--icon-color); }
.soft-button.icon-btn i { margin: 0; }

/* Botões de ação padronizados */
.soft-button.add-btn {
    width: 5rem;
    height: 5rem;
    padding: 0;
    font-size: 2.4rem;
    border-radius: 1.2rem;
}

.soft-button.metric-control-btn {
    width: 4.5rem;
    height: 4.5rem;
    padding: 0;
    font-size: 2.2rem;
    border-radius: 1.2rem;
    flex-shrink: 0;
}

/* --- Navegação --- */
.bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; }
.bottom-nav nav { 
    display: flex; 
    justify-content: space-around; 
    align-items: center; 
    background-color: var(--component-bg); 
    border-top: 1px solid var(--border-color); 
    padding: 1.6rem 0; 
    box-shadow: var(--shadow); 
    min-height: 7rem;
}
.bottom-nav .nav-button { background: none; border: none; color: var(--icon-color); display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: color 0.3s ease; }
.bottom-nav .nav-button i { font-size: 2.6rem; margin-bottom: 0.6rem; }
.bottom-nav .nav-button span { font-size: 1.2rem; }
.bottom-nav .nav-button.active { color: var(--primary-color); }

/* --- Página de Ajustes --- */
.settings-card { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); overflow: hidden; margin-top: 2rem; }
.settings-card-header { display: flex; align-items: center; gap: 1.2rem; padding: 1.6rem; border-bottom: 1px solid var(--divider-color); }
.settings-card-header i { font-size: 2.4rem; color: var(--primary-color); }
.settings-card-header h2 { font-size: 1.8rem; font-weight: 600; }
.settings-card-body { display: flex; flex-direction: column; gap: 1.6rem; padding: 1.6rem; overflow: hidden; }
.setting-row { display: flex; justify-content: space-between; align-items: center; gap: 1rem; }
.setting-row label { font-weight: 500; flex-shrink: 0; }
.setting-row.column { flex-direction: column; align-items: flex-start; gap: 1.2rem; }
.setting-divider { height: 1px; width: 100%; background-color: var(--divider-color); margin: -0.8rem 0; }
.toggle-button { width: 6rem; height: 3rem; background-color: var(--bg-color); border: none; border-radius: 1.5rem; cursor: pointer; position: relative; box-shadow: var(--soft-shadow-inset-sharp); flex-shrink: 0;}
.toggle-circle { width: 2.4rem; height: 2.4rem; background-color: var(--icon-color); border-radius: 50%; position: absolute; top: 0.3rem; left: 0.4rem; transition: transform 0.3s ease; }
:root[data-theme="dark"] .toggle-circle { transform: translateX(2.9rem); background-color: var(--primary-color); }
.setting-row .soft-input { width: 8rem; padding: 0.8rem; text-align: center; }
.color-palette { display: flex; gap: 1rem; flex-wrap: wrap; justify-content: space-evenly; width: 100%; }
.color-palette .color-swatch { width: 3rem; height: 3rem; border-radius: 50%; cursor: pointer; border: 3px solid transparent; transition: border-color 0.2s ease; }
.color-palette .color-swatch.active { border-color: var(--primary-color); }
:root[data-theme="light"] #dark-theme-palette { display: none; }
:root[data-theme="dark"] #light-theme-palette { display: none; }

/* --- Aba Foco: Pomodoro --- */
.pomodoro-app { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); margin-bottom: 2.5rem; }
.pomodoro-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid var(--divider-color); }
.pomodoro-header h2 { font-weight: 600; font-size: 1.8rem; }
.pomodoro-timer { display: flex; flex-direction: column; align-items: center; gap: 1rem; padding: 1.5rem; }
.timer-display-container { width: 20rem; height: 20rem; border-radius: 50%; background-color: var(--bg-color); border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; box-shadow: var(--soft-shadow-inset-sharp); }
.pomodoro-controls { 
    display: flex; 
    gap: 2rem; 
    margin-top: 1.5rem; 
    justify-content: center;
}
.pomodoro-btn { 
    width: 6rem; 
    height: 6rem; 
    border-radius: 50%; 
    font-size: 3.2rem; 
    padding: 0; 
}

/* --- Aba Foco: To-Do List & Prioridades --- */
.todo-app { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); margin-bottom: 2.5rem; }
.todo-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid var(--divider-color); }
.todo-header h2 { font-weight: 600; font-size: 1.8rem; }
.todo-body { padding: 1.5rem; }
.add-task-container { display: flex; gap: 1rem; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; }
#task-input { flex: 1 1 180px; min-width: 0; }
#add-task-btn { width: 5rem; height: 5rem; border-radius: 1.2rem; font-size: 2.4rem; padding: 0; flex: 0 0 auto; }
.task-item, .goal-item { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); }
.goal-item { padding: 1.6rem; }
.task-item { display: flex; align-items: center; justify-content: space-between; padding: 1.2rem 1.6rem; }
.task-item.completed .complete-btn, .complete-subtask-btn.completed { color: #28a745; }
.task-item-buttons button, .subtask-actions button { color: var(--icon-color); }
.complete-subtask-btn { background: none; border: none; font-size: 2.2rem; cursor: pointer; padding: 0; margin-right: 1rem; display: flex; align-items: center; justify-content: center; }

/* --- Aba Bem-estar --- */
.water-tracker-card, .sleep-tracker-card { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); margin-bottom: 2.5rem; }
.water-header, .sleep-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid var(--divider-color); }
.metric-header { display: flex; align-items: center; gap: 1rem; }
.metric-header i { font-size: 2.2rem; color: var(--primary-color); }
.metric-header h4 { font-weight: 600; font-size: 1.8rem; }
.water-body { display: flex; justify-content: space-around; align-items: center; padding: 2rem 1.5rem; }
.water-display { text-align: center; }
.water-display span:first-child { font-size: 3.2rem; font-weight: 600; }
.water-display span:last-child { font-size: 1.4rem; }

.water-footer { padding: 0 1.5rem 1.5rem; }
#water-progress { width: 100%; height: 1rem; -webkit-appearance: none; appearance: none; }
#water-progress::-webkit-progress-bar { background-color: var(--bg-color); border-radius: 0.5rem; box-shadow: var(--soft-shadow-inset-sharp); }
#water-progress::-webkit-progress-value { background-color: var(--primary-color); border-radius: 0.5rem; transition: width 0.3s ease; }
#water-feedback { text-align: center; margin-top: 1rem; font-size: 1.4rem; font-weight: 500; opacity: 0.8; }
.sleep-body-container { padding: 1.5rem; }
.sleep-inputs { display: flex; align-items: flex-end; gap: 1rem; width: 100%; margin-bottom: 1.5rem; }
.sleep-inputs > div { flex: 1; }
.sleep-inputs label { font-size: 1.2rem; opacity: 0.8; margin-bottom: 0.5rem; display: block; white-space: nowrap; }
.sleep-inputs input { padding: 0.8rem; text-align: center; }
#save-sleep-btn { width: 100%; }
.sleep-body.completed { display: none; flex-direction: column; align-items: center; text-align: center; gap: 1.5rem; }
.sleep-tracker-card.answered #sleep-form-view { display: none; }
.sleep-tracker-card.answered #sleep-completed-view { display: flex; }
.sleep-total-display p:first-child { font-size: 1.4rem; margin-bottom: 0.5rem; }
#sleep-total { font-size: 3.2rem; font-weight: 600; }
#sleep-feedback { font-size: 1.4rem; font-weight: 500; opacity: 0.8; }
.mood-tracker { --mood-5-color: #28a745; --mood-4-color: #0d6efd; --mood-3-color: #6c757d; --mood-2-color: #fd7e14; --mood-1-color: #dc3545; margin-bottom: 2.5rem; background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); padding: 1.5rem; }
.mood-tracker h3 { text-align: center; font-weight: 600; margin-bottom: 1.5rem; }
.mood-options { display: flex; justify-content: space-around; align-items: flex-start; }
.mood-option { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }
.mood-btn { width: 5rem; height: 5rem; border-radius: 50%; border: 2px solid transparent; background-color: var(--bg-color); color: var(--text-color); cursor: pointer; box-shadow: var(--shadow); transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; font-size: 2.8rem; }
.mood-btn i { color: inherit; }
.mood-options .mood-btn:not(.active) { opacity: 0.5; }
.mood-btn.active { border-color: currentColor; }
.mood-btn.active.mood-1 { color: var(--mood-1-color); } .mood-btn.active.mood-2 { color: var(--mood-2-color); } .mood-btn.active.mood-3 { color: var(--mood-3-color); } .mood-btn.active.mood-4 { color: var(--mood-4-color); } .mood-btn.active.mood-5 { color: var(--mood-5-color); }
.mood-label { font-size: 1.2rem; font-weight: 500; color: var(--icon-color); }
.daily-journal { margin-bottom: 2.5rem; background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); }
.journal-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid var(--divider-color); }
.journal-header h4 { font-weight: 600; font-size: 1.8rem; }
.journal-body { padding: 1.5rem; }
.journal-question-text { text-align: center; font-weight: 500; margin-bottom: 1.5rem; }
#journal-form { display: flex; flex-direction: column; align-items: center; gap: 1.5rem; }
#journal-input { min-height: 8rem; }
#journal-form button { width: 100%; }
#journal-answer { background-color: var(--bg-color); padding: 1.2rem; border-radius: 1.2rem; font-style: italic; white-space: pre-wrap; }
.journal-completed-view span { display: block; text-align: center; font-weight: 500; color: var(--icon-color); margin-top: 1.5rem; }
.daily-journal .journal-form { display: block; }
.daily-journal .journal-completed-view { display: none; }
.daily-journal.answered .journal-form { display: none; }
.daily-journal.answered .journal-completed-view { display: block; }
#journal-history-list, #metrics-history-list { list-style: none; padding: 0; margin: 2rem 0; max-height: 40vh; overflow-y: auto; }
.journal-history-item, .metrics-history-item { padding: 1.6rem 0; border-bottom: 1px solid var(--divider-color); }
.journal-history-item:first-child, .metrics-history-item:first-child { padding-top: 0; }
.journal-history-item:last-child, .metrics-history-item:last-child { border-bottom: none; }
.history-date { font-size: 1.4rem; font-weight: 600; color: var(--primary-color); margin-bottom: 0.8rem; }
.history-question { font-weight: 500; margin-bottom: 1rem; }
.history-answer, .history-value { white-space: pre-wrap; opacity: 0.8; }
.no-history-message { text-align: center; padding: var(--space-lg); opacity: 0.7; }

/* Empty State Component */
.empty-state { 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    padding: 2rem; 
    text-align: center; 
    opacity: 0.7; 
}
.empty-state h4 { 
    font-size: 1.8rem; 
    margin-bottom: 0.8rem; 
    font-weight: 500; 
}
.empty-state p { 
    font-size: 1.4rem; 
    opacity: 0.8; 
    max-width: 30rem; 
}
.habit-tracker { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); }
.habits-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid var(--divider-color); }
.habits-header h2 { font-weight: 600; font-size: 1.8rem; }
#habits-list { list-style: none; display: flex; flex-direction: column; gap: 1rem; padding: 1.5rem; }
.habit-item { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); padding: 1.6rem; }
.habit-info { display: flex; align-items: center; justify-content: space-between; }
.habit-icon-name { display: flex; align-items: center; gap: 1rem; flex-shrink: 1; min-width: 0; }
.habit-icon { font-size: 2.8rem; flex-shrink: 0; }
.habit-name { font-weight: 500; }
.habit-info-right { display: flex; align-items: center; gap: 1rem; flex-shrink: 0; }
.habit-streak { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; }
.habit-actions button { color: var(--icon-color); }
.habit-week-tracker { display: flex; justify-content: space-between; margin-top: 1.5rem; }
.day-circle { width: 3.5rem; height: 3.5rem; border-radius: 50%; background-color: var(--bg-color); box-shadow: var(--soft-shadow-inset-sharp); display: flex; align-items: center; justify-content: center; font-weight: 500; cursor: pointer; transition: all 0.2s ease; border: 2px solid transparent; }
.day-circle.current { border-color: var(--primary-color); }
.day-circle.completed { background-color: var(--habit-color); color: white; box-shadow: var(--shadow); }
.day-circle.completed.current { border-color: var(--habit-color); }
.day-circle.disabled { opacity: 0.5; cursor: not-allowed; }

/* --- Layout Responsivo (Tablet) --- */
@media (min-width: 768px) {
    .foco-grid-container { 
        display: grid; 
        grid-template-columns: 1fr 1fr; 
        gap: 2.5rem; 
        align-items: start; 
    }
    .goals-app, .todo-app, .pomodoro-app { margin-bottom: 0; }
}

/* --- Estilos Detalhados --- */
#timer-display { font-size: 4.4rem; font-weight: 700; color: var(--text-color); }
#timer-status { font-weight: 500; }
:root[data-theme="light"] #timer-status { color: var(--primary-color); }
:root[data-theme="dark"] #timer-status { color: var(--primary-color); opacity: 0.8; }
.priority-selector-wrapper { position: relative; flex: 0 0 auto; }
.priority-btn { 
    width: 5rem; 
    height: 5rem; 
    padding: 0; 
    font-size: 2rem; 
    border-radius: 1.2rem;
}
.priority-indicator-btn { font-size: 1.6rem; color: transparent; background-clip: text; -webkit-background-clip: text; }
.priority-picker { 
    position: absolute; 
    bottom: 120%; 
    left: 50%; 
    transform: translateX(-50%); 
    width: 15rem; 
    background-color: var(--component-bg); 
    border: 1px solid var(--border-color); 
    border-radius: 1.2rem; 
    box-shadow: var(--shadow); 
    padding: 0.8rem; 
    z-index: 20; 
    display: flex; 
    flex-direction: column; 
    gap: 0.5rem; 
}
.priority-picker.hidden { display: none; }

/* Seletor de categorias para finanças */
.category-selector-wrapper { 
    position: relative; 
    width: 100%; 
}

.category-selector-btn { 
    width: 100%; 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    padding: 1.2rem 1.6rem; 
    text-align: left;
    gap: 1rem;
}

.category-selector-btn > i:first-child {
    font-size: 2rem;
    flex-shrink: 0;
}

.category-selector-btn > span {
    flex: 1;
    font-weight: 500;
}

.category-selector-btn > i:last-child {
    font-size: 1.4rem;
    transition: transform 0.2s ease;
    flex-shrink: 0;
}

.category-selector-btn.open > i:last-child {
    transform: rotate(180deg);
}

.category-picker { 
    position: absolute; 
    top: 100%; 
    left: 0; 
    right: 0;
    background-color: var(--component-bg); 
    border: 1px solid var(--border-color); 
    border-radius: 1.2rem; 
    box-shadow: var(--shadow); 
    padding: 0.8rem; 
    z-index: 30; 
    display: flex; 
    flex-direction: column; 
    gap: 0.4rem; 
    max-height: 25rem;
    overflow-y: auto;
    margin-top: 0.4rem;
}

.category-picker.hidden { 
    display: none; 
}

.category-option { 
    background: none; 
    border: none; 
    color: var(--text-color); 
    padding: 1rem 1.2rem; 
    border-radius: 0.8rem; 
    cursor: pointer; 
    transition: background-color 0.2s ease; 
    display: flex; 
    align-items: center; 
    gap: 1rem; 
    text-align: left;
    font-size: 1.4rem;
}

.category-option:hover { 
    background-color: rgba(var(--primary-color), 0.1); 
}

.category-option i {
    font-size: 1.8rem;
    width: 2.4rem;
    text-align: center;
    flex-shrink: 0;
}
.priority-option { 
    background: none; 
    border: none; 
    color: var(--text-color); 
    padding: 1rem; 
    border-radius: 0.8rem; 
    cursor: pointer; 
    text-align: left; 
    display: flex; 
    align-items: center; 
    gap: 1rem; 
    width: 100%; 
    font-size: 1.4rem; 
}
.priority-option:hover { background-color: var(--bg-color); }
#task-list { list-style: none; display: flex; flex-direction: column; gap: 1rem; }
.task-item-content { display: flex; align-items: center; gap: 1.2rem; overflow: hidden; flex-grow: 1; }
.task-item-content .complete-btn { background: none; border: none; font-size: 2.2rem; cursor: pointer; padding: 0; margin-right: 0.5rem; display: flex; align-items: center; justify-content: center; color: var(--icon-color); }
.task-item-content span:last-child { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.priority-tag { font-size: 1.2rem; font-weight: 600; padding: 0.4rem 1rem; border-radius: 0.8rem; color: white; flex-shrink: 0; }
.task-item.completed .task-item-content span { text-decoration: line-through; opacity: 0.6; }
.task-item-buttons { display: flex; align-items: center; }
.priority-1, .priority-tag-1 { background-color: #dc3545; } .priority-2, .priority-tag-2 { background-color: #ffc107; } .priority-3, .priority-tag-3 { background-color: #0d6efd; } .priority-4, .priority-tag-4 { background-color: #6c757d; }
.priority-dot { width: 1.2rem; height: 1.2rem; border-radius: 50%; }
.goals-app { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); }
.goals-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; }
.goals-header h2 { font-weight: 600; font-size: 1.8rem; }
#goals-list { list-style: none; display: flex; flex-direction: column; gap: 1.5rem; padding: 0 1.5rem 1.5rem; }
.goal-header { display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
.goal-title { font-weight: 600; }
.goal-actions { display: flex; align-items: center; gap: 0.8rem; }
.goal-actions button { color: var(--icon-color); }
.goal-progress { margin-top: 1rem; cursor: pointer; }
.progress-bar-container { width: 100%; height: 0.8rem; background-color: var(--bg-color); border-radius: 0.4rem; box-shadow: var(--soft-shadow-inset-sharp); overflow: hidden; }
.progress-bar { height: 100%; width: 0%; background-color: #4caf50; border-radius: 0.4rem; transition: width 0.5s ease; }
.goal-details { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out; }
.goal-item.expanded .goal-details { max-height: 60rem; }
.goal-details-content { padding-top: 1rem; border-top: 1px solid var(--border-color); margin-top: 1rem; }
.goal-categories { display: flex; gap: 0.8rem; flex-wrap: wrap; margin-bottom: 1rem; }
.goal-category { font-size: 1.2rem; font-weight: 600; padding: 0.4rem 0.8rem; border-radius: 0.8rem; color: white; }
.add-subtask-form { display: flex; gap: 1rem; margin-top: 1rem; align-items: center; }
.add-subtask-form input { flex-grow: 1; }
.add-subtask-form button { padding: 0; width: 4.5rem; height: 4.5rem; font-size: 2rem; flex-shrink: 0; }
.subtask-list { list-style: none; display: flex; flex-direction: column; gap: 1rem; margin-top: 1rem; }
.subtask-item { display: flex; align-items: center; justify-content: space-between; }
.subtask-item-content { display: flex; align-items: center; gap: 1rem; }
.subtask-text.completed { text-decoration: line-through; opacity: 0.6; }
.subtask-actions { display: flex; align-items: center; gap: 0.8rem; }
.subtask-actions button { color: var(--icon-color); }
.subtask-actions button i { font-size: inherit; }

/* --- Modal Styles --- */
.modal-backdrop { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background-color: rgba(0,0,0,0.6); 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    z-index: 1000; 
    opacity: 1; 
    transition: opacity 0.3s ease; 
}
.modal-backdrop.hidden { opacity: 0; pointer-events: none; }
.modal-content { 
    background-color: var(--component-bg); 
    border: 1px solid var(--border-color); 
    padding: 2.4rem; 
    border-radius: 1.6rem; 
    width: 90%; 
    max-width: 50rem; 
    box-shadow: 0px 8px 32px rgba(0, 0, 0, 0.15); 
    display: flex; 
    flex-direction: column; 
    gap: 1.6rem; 
}
#goal-form, #habit-form { 
    display: flex; 
    flex-direction: column; 
    gap: 1.6rem; 
}
.picker-container { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(5rem, 1fr)); 
    gap: 1rem; 
}
.picker-option { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }
.picker-button { 
    width: 4.5rem; 
    height: 4.5rem; 
    border-radius: 50%; 
    border: 2px solid transparent; 
    background-color: var(--bg-color); 
    color: var(--text-color); 
    cursor: pointer; 
    box-shadow: var(--shadow); 
    transition: all 0.2s ease; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 2.4rem; 
}
.picker-button:has(.color-swatch) { background-color: transparent; box-shadow: none; }
.picker-button i { color: inherit; }
.picker-button.active { border-color: var(--primary-color); }
.picker-label { font-size: 1.1rem; color: var(--icon-color); }
.color-swatch { width: 100%; height: 100%; border-radius: 50%; }
.category-container { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(12rem, 1fr)); 
    gap: 1.2rem; 
    margin: 1rem 0;
}
.category-btn { 
    background-color: var(--bg-color); 
    color: var(--text-color); 
    padding: 1rem 1.6rem; 
    border-radius: 1rem; 
    border: 1px solid var(--border-color); 
    cursor: pointer; 
    box-shadow: var(--shadow); 
    transition: all 0.2s ease; 
    font-size: 1.4rem; 
    text-align: center;
    font-weight: 500;
}
.category-btn.active { box-shadow: var(--soft-shadow-inset-sharp); }
.modal-actions { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    gap: 1.2rem; 
    margin-top: 1.6rem; 
    padding-top: 1.2rem;
    border-top: 1px solid var(--divider-color);
}
#habit-modal .modal-actions > div { display: flex; gap: 1rem; }
#confirmation-modal .modal-actions { justify-content: flex-end; }
#confirmation-modal .modal-content h3 { text-align: center; margin-bottom: 0.5rem; }
#confirmation-modal .modal-content p { text-align: center; margin-bottom: 1.5rem; opacity: 0.8; }
.modal-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 1.6rem; 
}
.close-btn { 
    padding: 0; 
    width: 4rem; 
    height: 4rem; 
    font-size: 2rem; 
    border-radius: 50%; 
}
.modal-content.small { max-width: 30rem; }
.modal-title-center { text-align: center; width: 100%; }
.priority-picker-modal { display: flex; flex-direction: column; gap: 1rem; margin-top: 1.5rem; }

/* --- Focus Extras --- */
.focus-mits-card, .focus-stats-card, .timeboxing-card, .review-card, .fitness-card { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.6rem; box-shadow: var(--shadow); margin-top: 2.5rem; }
.focus-mits-card .todo-body, .focus-stats-card .todo-body, .timeboxing-card .todo-body, .review-card .todo-body, .fitness-card .todo-body { padding: 1.5rem; }
.add-task-container > * { min-width: 0; }
.fitness-card + .fitness-card { margin-top: 2rem; }
.stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
.stat-item { background-color: var(--bg-color); border: 1px solid var(--border-color); border-radius: 1.2rem; padding: 1rem; box-shadow: var(--soft-shadow-inset-sharp); display: flex; flex-direction: column; gap: 0.3rem; align-items: center; }
.stat-item span { font-size: 1.2rem; opacity: 0.8; }
.stat-item strong { font-size: 1.8rem; }
#timeboxing-list, #mits-list, #workout-list, #outdoor-history, #stretch-steps { list-style: none; display: flex; flex-direction: column; gap: 1rem; margin-top: 1rem; }
.timeboxing-item, .mit-item, .workout-item, .outdoor-item, .stretch-step { background-color: var(--component-bg); border: 1px solid var(--border-color); border-radius: 1.2rem; box-shadow: var(--shadow); padding: 1.2rem; display: flex; align-items: center; justify-content: space-between; }
.breath-display { display: none; align-items: center; justify-content: center; min-height: 12rem; background-color: var(--bg-color); border: 1px solid var(--border-color); border-radius: 1.2rem; box-shadow: var(--soft-shadow-inset-sharp); font-size: 2rem; font-weight: 600; position: relative; overflow: hidden; }
.breath-display.active { display: flex; }
.breath-progress-bar { position: absolute; bottom: 0; left: 0; height: 6px; background-color: var(--primary-color); width: 100%; transition: width 1s linear; }
#stretch-steps { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 1rem; }
.stretch-step { justify-content: flex-start; gap: 0.8rem; }
/* --- Fitness --- */
#fitness .todo-header h2 { font-size: 1.8rem; font-weight: 600; }


/* Overrides específicos */
.focus-mits-card .add-task-container { 
    flex-wrap: nowrap; 
    align-items: stretch; 
}
#mit-input { 
    flex: 1 1 auto; 
    min-width: 0; 
}
.focus-mits-card .add-btn {
    flex-shrink: 0;
}
.toggle-button.active .toggle-circle { transform: translateX(2.9rem); background-color: var(--primary-color); }

/******** Toque/Focus visual cleanup (mobile) ********/
* { -webkit-tap-highlight-color: transparent; }
button, a, input, textarea, select { outline: none; }
button:focus, a:focus, input:focus, textarea:focus, select:focus { outline: none; box-shadow: none; }
button:focus-visible, a:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible { outline: 2px solid transparent; box-shadow: none; }

/* Ajustes layout Dados */
.settings-card-body .setting-row { gap: 1.2rem; }
.settings-card-body .setting-row > label { flex: 1 1 auto; }
.settings-card-body .setting-row > .soft-button { flex: 0 0 auto; }
@media (max-width: 420px) {
  .settings-card-body .setting-row { flex-wrap: wrap; }
  .settings-card-body .setting-row > label { flex: 1 1 100%; }
}

/* Controles de Ajustes alinhados à direita */
.settings-card-body .setting-row { justify-content: space-between; flex-wrap: nowrap !important; }
.settings-card-body .setting-row > label { flex: 1 1 auto; }
.settings-card-body .setting-row > .soft-input,
.settings-card-body .setting-row > .toggle-button,
.settings-card-body .setting-row > .soft-button { margin-left: auto; flex: 0 0 auto; }

/* Ocultar barras de rolagem globalmente */
* { scrollbar-width: none; -ms-overflow-style: none; }
*::-webkit-scrollbar { width: 0; height: 0; }

/* Headers unificados com padrão flex-start e margin-left auto para ações */

/* MIT ações: extremos e largura total */
.focus-mits-card .todo-body > div:last-child { display: flex; justify-content: space-between; width: 100%; }

/* Padronização de cor dos ícones de ação */
.soft-button.icon-btn, .soft-button.icon-btn i { color: var(--icon-color) !important; }
.goal-actions button, .subtask-actions button { color: var(--icon-color) !important; }

/* Mood note */
.mood-note { text-align: center; font-size: 1.4rem; opacity: 0.9; margin-top: 1.6rem; margin-bottom: 0.8rem; }

/* Header: título/ícone à esquerda, ações à direita */
.todo-header > i + h2, .goals-header > i + h2, .habits-header > i + h2, .journal-header > i + h4 { margin-left: 1.2rem; }
.todo-header .soft-button.icon-btn, .goals-header .soft-button, .habits-header .soft-button, .journal-header .soft-button, .water-header .soft-button.icon-btn, .sleep-header .soft-button.icon-btn { margin-left: auto; }

/* Buttons text clipping fix */
.soft-button { white-space: nowrap; }

@media (max-width: 420px) {
  .content { 
    padding: 1.4rem 1rem; 
    padding-bottom: 9rem; 
  }
  .soft-button { 
    padding: 1rem 1.8rem; 
  }
  .pomodoro-btn { 
    width: 5.6rem; 
    height: 5.6rem; 
  }
}

/* Headers finais: layout flex padrão com tokens */

/* Remover ícones de todos os cabeçalhos (somente ícones líderes) */
.settings-card-header > i, .todo-header > i, .pomodoro-header > i, .goals-header > i, .habits-header > i, .journal-header > i, .water-header .metric-header > i, .sleep-header .metric-header > i { display: none !important; }
/* Títulos sem recuo extra */
.todo-header h2, .pomodoro-header h2, .goals-header h2, .habits-header h2, .journal-header h4, .settings-card-header h2, .water-header h4, .sleep-header h4 { margin-left: 0 !important; }

/* === FINANÇAS STYLES === */

/* Finance Colors */
:root {
    --finance-income: #10B981;
    --finance-expense: #EF4444;
    --finance-neutral: #6B7280;
    --finance-warning: #F59E0B;
}

/* Finance Summary Card */
.finance-summary-card {
    background-color: var(--component-bg);
    border: 1px solid var(--border-color);
    border-radius: 1.6rem;
    box-shadow: var(--shadow);
    margin-bottom: 2rem;
}

.finance-summary-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid var(--divider-color);
}

.finance-summary-header h2 {
    font-weight: 600;
    font-size: 1.8rem;
}

.finance-period-btn {
    font-size: 1.4rem;
    padding: 0.8rem 1.6rem;
}

.finance-summary-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    padding: 1.5rem;
}

.finance-summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    background-color: var(--bg-color);
    border-radius: 1.2rem;
    border: 1px solid var(--border-color);
}

.finance-label {
    font-size: 1.2rem;
    opacity: 0.8;
    text-align: center;
}

.finance-value {
    font-size: 1.6rem;
    font-weight: 600;
}

.finance-summary-item.income .finance-value {
    color: var(--finance-income);
}

.finance-summary-item.expense .finance-value {
    color: var(--finance-expense);
}

.finance-summary-item.balance .finance-value {
    color: var(--text-color);
}

.finance-progress-container {
    padding: 0 1.5rem 1.5rem;
}

.finance-progress-bar {
    width: 100%;
    height: 0.8rem;
    background-color: var(--bg-color);
    border-radius: 0.4rem;
    overflow: hidden;
    margin-bottom: 0.8rem;
}

.finance-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--finance-income), var(--finance-warning));
    border-radius: 0.4rem;
    transition: width 0.3s ease;
}

.finance-progress-text {
    font-size: 1.2rem;
    opacity: 0.7;
    text-align: center;
    display: block;
}

/* Finance period chips */
.finance-period-chips {
    display: flex;
    gap: 0.8rem;
    margin-bottom: 1.5rem;
}

/* Transaction Cards */
.finance-transactions-card {
    background-color: var(--component-bg);
    border: 1px solid var(--border-color);
    border-radius: 1.6rem;
    box-shadow: var(--shadow);
}

.finance-transactions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid var(--divider-color);
}

.finance-transactions-header h3 {
    font-weight: 600;
    font-size: 1.8rem;
}

.finance-transactions-body {
    padding: 1.5rem;
}

.finance-transactions-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
    padding: 0;
    margin: 0;
}

.finance-transaction-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.4rem;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 1.2rem;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-bottom: 1rem;
    position: relative;
    z-index: 1;
}

.finance-transaction-item:hover {
    background-color: var(--component-bg);
    box-shadow: var(--shadow);
}

.finance-transaction-left {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 1;
    min-width: 0;
}

.finance-transaction-icon {
    width: 4rem;
    height: 4rem;
    border-radius: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    flex-shrink: 0;
}

.finance-transaction-icon.income {
    background-color: rgba(16, 185, 129, 0.1);
    color: var(--finance-income);
}

.finance-transaction-icon.expense {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--finance-expense);
}

.finance-transaction-info {
    flex: 1;
    min-width: 0;
}

.finance-transaction-category {
    font-weight: 500;
    font-size: 1.5rem;
    margin-bottom: 0.2rem;
}

.finance-transaction-description {
    font-size: 1.2rem;
    opacity: 0.7;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.finance-transaction-amount {
    font-weight: 600;
    font-size: 1.6rem;
    flex-shrink: 0;
}

.finance-transaction-amount.income {
    color: var(--finance-income);
}

.finance-transaction-amount.expense {
    color: var(--finance-expense);
}

/* Transaction Modal */
.finance-type-selector {
    margin-bottom: 1.5rem;
}

.finance-type-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 0.8rem;
}

.finance-type-btn {
    padding: 1.2rem;
    border: 2px solid var(--border-color);
    border-radius: 1.2rem;
    background-color: var(--bg-color);
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
    font-weight: 500;
}

.finance-type-btn.active {
    border-color: var(--primary-color);
    background-color: var(--primary-color);
    color: white;
}

.finance-amount-section {
    margin-bottom: 1.5rem;
}

.finance-amount-input-container {
    display: flex;
    align-items: center;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 1.2rem;
    padding: 0.5rem;
    margin-top: 0.8rem;
}

.finance-currency {
    padding: 1rem 1rem 1rem 1.5rem;
    font-weight: 600;
    color: var(--text-color);
    font-size: 1.8rem;
}

.finance-amount-input {
    flex: 1;
    border: none;
    background: transparent;
    padding: 1rem;
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--text-color);
    outline: none;
}

.finance-quick-amounts {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.8rem;
    margin-bottom: 1.5rem;
}

.finance-category-section {
    margin-bottom: 1.5rem;
}

.finance-category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr));
    gap: 1rem;
    margin-top: 0.8rem;
}

.finance-category-btn {
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: 1rem;
    background-color: var(--bg-color);
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    font-size: 1.3rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.finance-category-btn.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.finance-category-icon {
    font-size: 2rem;
}

.finance-form-row {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.finance-form-field {
    flex: 1;
}

/* Date Group Headers */
.finance-date-header {
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--divider-color);
    opacity: 0.8;
}

.finance-date-group {
    margin-bottom: 1.5rem;
}

.finance-date-group:last-child {
    margin-bottom: 0;
}

/* Finance add section */
.finance-add-section {
    display: flex;
    gap: 1.2rem;
    margin-bottom: 2rem;
    width: 100%;
}

.finance-add-section .soft-button {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
    padding: 1.2rem;
    font-weight: 500;
    min-height: 5rem;
}

.finance-income-btn {
    background-color: #28a745;
    color: white;
    border-color: #28a745;
}

.finance-income-btn:hover {
    background-color: #218838;
    border-color: #218838;
}

.finance-expense-btn {
    background-color: var(--danger-bg);
    color: var(--danger-text);
    border-color: var(--danger-border);
}

.finance-expense-btn:hover {
    opacity: 0.9;
}

/* Modal de transações - Corrigido para scroll adequado */
#transaction-modal.modal-backdrop {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    display: flex !important;
    align-items: flex-start !important; /* Mudado de center para flex-start */
    justify-content: center !important;
    z-index: 1000 !important;
    background-color: rgba(0,0,0,0.6) !important;
    padding: 2rem 1rem !important; /* Padding superior para evitar colagem no topo */
    box-sizing: border-box !important;
    overflow-y: auto !important; /* Permitir scroll no backdrop */
    overflow-x: hidden !important;
}

#transaction-modal.modal-backdrop .modal-content {
    background: var(--component-bg) !important;
    border-radius: 1.6rem !important;
    box-shadow: var(--shadow) !important;
    width: 90vw !important;
    max-width: 45rem !important;
    min-height: fit-content !important; /* Altura mínima baseada no conteúdo */
    max-height: none !important; /* Remover limitação de altura */
    padding: 1.8rem !important;
    position: relative !important;
    margin: 0 auto 2rem auto !important; /* Margem inferior para espaçamento */
    flex-shrink: 0 !important;
}

#transaction-modal form {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

/* Form sections */
#transaction-modal .finance-amount-section,
#transaction-modal .finance-category-section,
#transaction-modal .finance-form-row,
#transaction-modal .finance-form-field {
    width: 100%;
    margin-bottom: 1.5rem;
}

#transaction-modal .finance-amount-input-container {
    display: flex;
    align-items: center;
    width: 100%;
}

#transaction-modal label {
    display: block;
    margin-bottom: 0.8rem;
    font-weight: 500;
}

/* Grids */
#transaction-modal .finance-quick-amounts {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.8rem;
    width: 100%;
}

#transaction-modal .finance-category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(8rem, 1fr));
    gap: 1rem;
    width: 100%;
}

/* Modal actions */
#transaction-modal .modal-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--divider-color);
}

#transaction-modal .finance-action-buttons {
    display: flex;
    gap: 1rem;
}

/* Mobile adjustments */
@media (max-width: 768px) {
    #transaction-modal.modal-backdrop {
        padding: 1rem 0.5rem 2rem 0.5rem !important; /* Padding ajustado para mobile */
    }
    
    #transaction-modal .modal-content {
        width: 95vw !important;
        padding: 1.5rem !important;
        margin-bottom: 2rem !important; /* Espaçamento inferior em mobile */
    }
    
    #transaction-modal .finance-quick-amounts {
        grid-template-columns: repeat(2, 1fr);
    }
    
    #transaction-modal .finance-category-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Finance summary actions */
.finance-summary-actions {
    display: flex;
    gap: 0.8rem;
}

/* Finance action buttons (save button) */
.finance-save-btn {
    background-color: #10B981 !important;
    color: white !important;
    border-color: #10B981 !important;
}

.finance-save-btn:hover {
    background-color: #059669 !important;
    border-color: #059669 !important;
}

.finance-action-buttons {
    display: flex;
    gap: 1rem;
}

/* Finance modal scroll fix - mais específico para evitar conflitos */
#finance-category-modal .modal-content {
    max-height: 90vh;
    overflow-y: auto;
}

/* Transactions filter modal scroll fix */
#transactions-filter-modal.modal-backdrop {
    padding: 1rem 0.5rem 2rem 0.5rem !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

#transactions-filter-modal .modal-content {
    max-height: 85vh !important;
    overflow-y: auto !important;
    width: 90vw !important;
    max-width: 45rem !important;
    margin: 0 auto 2rem auto !important;
    position: relative !important;
    display: flex !important;
    flex-direction: column !important;
}

/* Garantir que o conteúdo das abas ocupe o espaço necessário */
#transactions-filter-modal .filter-tab-content {
    flex: 1;
    overflow-y: auto;
}

@media (max-width: 768px) {
    #transactions-filter-modal .modal-content {
        width: 95vw !important;
        max-height: 85vh !important; /* Mais altura em mobile */
    }
    
    /* Ajustes específicos para mobile */
    #transactions-filter-modal .filter-tab-content {
        min-height: 300px; /* Menor altura mínima em mobile */
        margin-bottom: 0; /* Usar flexbox em mobile também */
    }
    
    #transactions-filter-modal .modal-actions {
        margin-top: 2rem;
        padding-top: 1.5rem;
    }
    
    #transactions-filter-modal .finance-custom-period {
        margin-bottom: 2rem;
    }
}

/* Category filter grid */
.finance-category-filter-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

/* Responsive */
@media (max-width: 768px) {
    .finance-summary-grid {
        grid-template-columns: 1fr;
        gap: 0.8rem;
    }
    
    .finance-summary-item {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }
    
    .finance-controls {
        gap: 1rem;
    }
    
    .finance-filters {
        flex-direction: column;
        align-items: stretch;
    }
    
    .finance-category-filter {
        min-width: auto;
    }
    
    .finance-quick-amounts {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .finance-category-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Estilos para o modal de período melhorado */
.finance-period-content {
    padding: 1rem 0;
}

.finance-period-section {
    margin-bottom: 1.5rem;
}

.finance-period-section h4 {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-color);
    opacity: 0.9;
}

.finance-period-chips {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.8rem;
    margin-bottom: 0;
}

.finance-period-divider {
    height: 1px;
    background-color: var(--divider-color);
    margin: 1.5rem 0;
}

.finance-custom-period {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.finance-date-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.finance-date-field {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.finance-date-field label {
    font-size: 1.3rem;
    font-weight: 500;
    color: var(--text-color);
    opacity: 0.8;
}

.finance-date-field input {
    font-size: 1.4rem;
}

#apply-custom-period-btn, #apply-transactions-period-btn {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

/* Correção completa de espaçamento no modal de filtro de transações */
#transactions-filter-modal .finance-custom-period {
    margin-bottom: 3rem; /* Mais espaço antes dos botões de ação */
}

#transactions-filter-modal .modal-actions {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid var(--divider-color);
    position: relative;
    z-index: 10;
    clear: both; /* Limpar floats */
}

/* Garantir que não haja sobreposição - altura mínima para cada aba */
#transactions-filter-modal .filter-tab-content {
    min-height: 350px; /* Altura mínima para empurrar botões para baixo */
    margin-bottom: 0; /* Removido para usar flexbox */
    padding-bottom: 2rem;
    overflow-y: auto; /* Permitir scroll se necessário */
}

#transactions-filter-modal .filter-tab-panel {
    min-height: 300px; /* Altura mínima para cada painel de aba */
    padding-bottom: 2rem;
}

/* Espaçamento específico para a aba de categoria */
#transactions-category-panel {
    padding-bottom: 3rem; /* Mais espaço na aba de categoria */
}

/* Espaçamento específico para a aba de período */
#transactions-period-panel {
    padding-bottom: 3rem; /* Mais espaço na aba de período */
}

@media (max-width: 480px) {
    .finance-period-chips {
        grid-template-columns: 1fr;
    }
    
    .finance-date-row {
        grid-template-columns: 1fr;
        gap: 0.8rem;
    }
}

/* Estilos para o modal de filtro de transações com abas */
.finance-filter-tabs {
    display: flex;
    border-bottom: 1px solid var(--divider-color);
    margin-bottom: 1.5rem;
    position: sticky;
    top: 0;
    background-color: var(--component-bg);
    z-index: 5;
}

.filter-tab-btn {
    flex: 1;
    background: none;
    border: none;
    padding: 1rem;
    font-size: 1.4rem;
    font-weight: 500;
    color: var(--icon-color);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.2s ease;
}

.filter-tab-btn.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
}

.filter-tab-btn:hover {
    color: var(--primary-color);
    opacity: 0.8;
}

.filter-tab-content {
    min-height: 200px;
}

.filter-tab-panel {
    display: none;
}

.filter-tab-panel.active {
    display: block;
}

#transactions-category-filter-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 0.8rem;
    padding: 1rem 0;
    margin-bottom: 2rem; /* Espaço extra no final do grid */
    min-height: 200px; /* Altura mínima para empurrar botões para baixo */
}

.finance-category-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 1.2rem;
}

.finance-category-btn.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.finance-category-btn:hover {
    background-color: var(--component-bg);
    box-shadow: var(--shadow);
}

.finance-category-btn.active:hover {
    opacity: 0.9;
}

/* Modal chips layout (removido com finanças) */

/* Inline setting rows in modals */
.modal-content .setting-row { flex-wrap: nowrap !important; }
.modal-content .setting-row > label { white-space: nowrap; }
.modal-content .setting-row > .soft-input { min-width: 10rem; }
/* Modal de aviso deve ficar por cima de outros modais */
#app-notice-modal.modal-backdrop {
    z-index: 1100 !important;
}

/* Espaçamento compacto para modal de transação */
#transaction-modal .finance-form-field {
    margin-bottom: 0.8rem;
}

#transaction-modal .finance-form-row {
    margin-bottom: 0.8rem;
}

/* Espaçamento mínimo entre seções */
#transaction-modal .finance-amount-section,
#transaction-modal .finance-category-section {
    margin-bottom: 0.8rem;
}

/* Espaçamento compacto para quick amounts */
#transaction-modal .finance-quick-amounts {
    margin: 0.6rem 0;
}

/* Espaçamento compacto para grid de categorias */
#transaction-modal .finance-category-grid {
    margin-top: 0.6rem;
}

/* Reduzir espaçamento entre data e descrição */
#transaction-modal .finance-form-row + .finance-form-field {
    margin-top: 0.4rem;
}

/* Modal actions mais compacto */
#transaction-modal .modal-actions {
    margin-top: 1rem;
    padding-top: 0.8rem;
    padding-bottom: 0.8rem; /* Espaço moderado para scroll */
    border-top: 1px solid var(--divider-color);
}
